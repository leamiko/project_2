<include file="./Public/html/header.html" />
<div id="main">
    <div id="main-cnt">
        <div id="contentH" class="cnt-box wall" style="padding-left: 0px;">
            <div class="title clearfix">
                <div class="l title-cnt">
                    <span class="icon icon8"></span>Add a news
                </div>
            </div>
        </div>
        <div class="top_6">
            <table cellpadding="10" cellspacing="10" class="tab">
                <tr height="60px">
                    <td align="right">Title:&nbsp;&nbsp;</td>
                    <td><input type="text" id="title" /></td>
                </tr>
                <tr height="60px">
                    <td align="right">Language:&nbsp;&nbsp;</td>
                    <td>
                        &nbsp;&nbsp;<input type="checkbox" value="1" />&nbsp;&nbsp;Chinese
                        &nbsp;&nbsp;<input type="checkbox" value="2" checked="checked" />&nbsp;&nbsp;English
                        &nbsp;&nbsp;<input type="checkbox" value="3" />&nbsp;&nbsp;Arabic
                    </td>
                </tr>
                <tr>
                    <td align="right">Content:&nbsp;&nbsp;</td>
                    <td><textarea id="content"></textarea></td>
                </tr>
                <tr height="60px">
                    <td colspan="2" align="center"><input class="btn btn-primary" type="button" value="Save" id="save" /></td>
                </tr>
            </table>
        </div>
    </div>
</div>
<script type="text/javascript" src="__PUBLIC__/ckeditor/ckeditor.js"></script>
<script type="text/javascript" src="__PUBLIC__/ckeditor/adapters/jquery.js"></script>
<script type="text/javascript">
//<![CDATA[
CKEDITOR.disableAutoInline = true;
$(function() {
	$("input[type=text]").focus(function() {
		$(this).next().show();
	}).blur(function() {
		$(this).next().hide();
	});
	$("#content").ckeditor({
		width		: 700,
		height		: 300,
		language	: 'en',
    	filebrowserUploadUrl: '<{:U("news/upload")}>'
	});
	$("#save").click(function() {
		var title = $.trim($("#title").val());
		var author = $.trim($("#author").val());
		var content = $("#content").val();
		if (title.length <= 0) {
			$.ligerDialog.alert('文章标题不能为空', '温馨提示', 'warn');
			return false;
		}
		if (title.length > 20) {
			$.ligerDialog.alert('文章标题不能超过20个字', '温馨提示', 'warn');
			return false;
		}
		if ((author.length == 1) || author.length > 6) {
			$.ligerDialog.alert('作者名字为2-6个字', '温馨提示', 'warn');
			return false;
		}
		if (content.length <= 0) {
			$.ligerDialog.alert('正文内容不能为空', '温馨提示', 'warn');
			return false;
		}
		$.post("<{:U('news/add')}>", {title: title, author: author, content: content}, function(data) {
			if (data.status) {
				$.ligerDialog.alert(data.msg, '成功了(^_^)', 'success');
				location.reload(true);
			} else {
				$.ligerDialog.alert(data.msg, '出错了(>_<)', 'error');
                return false;
			}
		}, 'json');
	});
});
//]]>
</script>
<include file="./Public/html/footer.html" />