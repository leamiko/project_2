<include file="./Public/html/header.html" />
<div id="main">
    <div id="main-cnt">
        <div id="contentH" class="cnt-box wall" style="padding-left: 0px;">
            <div class="title clearfix">
                <div class="l title-cnt">
                    <span class="icon icon8"></span>编辑公司文章
                </div>
            </div>
        </div>
        <div class="top_6">
            <table cellpadding="10" cellspacing="10" class="tab">
                <tr height="60px">
                    <td>标题：</td>
                    <td><input type="text" id="title" value="<{$article['title']}>" />&nbsp;&nbsp;<span style="color:#f00;display:none;">文章标题不能超过20个字</span></td>
                </tr>
                <tr height="60px">
                    <td>作者：</td>
                    <td><input type="text" id="author" value="<{$article['author']}>" />&nbsp;&nbsp;<span style="color:#f00;display:none;">作者名字为2-6个字</span></td>
                </tr>
                <tr>
                    <td>正文内容：</td>
                    <td><textarea id="content"><{$article['content']}></textarea></td>
                </tr>
                <tr height="60px">
                    <td colspan="2" align="center"><input class="btn btn-primary" type="button" value="保存" id="save" /></td>
                </tr>
            </table>
        </div>
    </div>
</div>
<script type="text/javascript" src="__PUBLIC__/ckeditor/ckeditor.js"></script>
<script type="text/javascript" src="__PUBLIC__/ckeditor/adapters/jquery.js"></script>
<script type="text/javascript">
//<![CDATA[
CKEDITOR.disableAutoInline = true;
$(function() {
	$("input[type=text]").focus(function() {
		$(this).next().show();
	}).blur(function() {
		$(this).next().hide();
	});
	$("#content").ckeditor({
		width	: 700,
		height	: 300
	});
	$("#save").click(function() {
		var title = $.trim($("#title").val());
		var author = $.trim($("#author").val());
		var content = $("#content").val();
		if (title.length <= 0) {
			$.ligerDialog.alert('文章标题不能为空', '温馨提示', 'warn');
			return false;
		}
		if (title.length > 20) {
			$.ligerDialog.alert('文章标题不能超过20个字', '温馨提示', 'warn');
			return false;
		}
		if ((author.length == 1) || author.length > 6) {
			$.ligerDialog.alert('作者名字为2-6个字', '温馨提示', 'warn');
			return false;
		}
		if (content.length <= 0) {
			$.ligerDialog.alert('正文内容不能为空', '温馨提示', 'warn');
			return false;
		}
		$.post('<{:U("news/update")}>/id/<{$article["id"]}>', {title: title, author: author, content: content}, function(data) {
			if (data.status) {
				$.ligerDialog.alert(data.msg, '成功了(^_^)', 'success');
				location.reload(true);
			} else {
				$.ligerDialog.alert(data.msg, '出错了(>_<)', 'error');
                return false;
			}
		}, 'json');
	});
});
//]]>
</script>
<include file="./Public/html/footer.html" />